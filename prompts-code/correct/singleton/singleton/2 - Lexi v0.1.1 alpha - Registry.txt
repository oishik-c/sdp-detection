Given the following java code, determine whether it contains an instance of the singleton design pattern playing the role of singleton.

You should read the entire code snippet carefully. Then answer with YES or NO in capital letters. Finally, In 2-3 short sentences, explain why that is the answer

CODE:

package com.jmonkey.export;

import java.io.BufferedReader;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InvalidClassException;
import java.io.NotSerializableException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OptionalDataException;
import java.io.Reader;
import java.io.Serializable;
import java.io.Writer;
import java.util.ArrayList;
import java.util.Enumeration;
import java.util.Hashtable;
import java.util.Map;
import java.util.Properties;
import java.util.StringTokenizer;


public class Registry {
	
	public static final int[] VERSION = { 0, 1, 1 };

	public static final int TYPE_NULL = 0x0; 
	public static final int TYPE_STRING_SINGLE = 0x2; 
	public static final int TYPE_STRING_ARRAY = 0x4; 
	public static final int TYPE_OBJECT_SINGLE = 0x8; 
	public static final int TYPE_OBJECT_ARRAY = 0x10; 
	public static final int TYPE_BOOLEAN_SINGLE = 0x20; 
	public static final int TYPE_BYTE_SINGLE = 0x40; 
	public static final int TYPE_BYTE_ARRAY = 0x080; 
	public static final int TYPE_CHAR_SINGLE = 0xF0; 
	public static final int TYPE_CHAR_ARRAY = 0x100; 
	public static final int TYPE_SHORT_SINGLE = 0x200; 
	public static final int TYPE_INT_SINGLE = 0x400; 
	public static final int TYPE_INT_ARRAY = 0x800; 
	public static final int TYPE_LONG_SINGLE = 0xF00; 
	public static final int TYPE_DOUBLE_SINGLE = 0x1000; 
	public static final int TYPE_FLOAT_SINGLE = 0x2000; 
	public static final int TYPE_CORRUPT = 0x4000; 

	
	public static final File RESOURCE_DIRECTORY =
		new File(
			ensureDirectory(
				System.getProperty("user.home")
					+ java.io.File.separator
					+ ".lexi"
					+ java.io.File.separator
					+ "export"));
	public static final File REGISTRY_DIRECTORY =
		new File(
			ensureDirectory(
				RESOURCE_DIRECTORY.getAbsolutePath()
					+ File.separator
					+ "registry"));

	private static Registry _INSTANCE = null;

	
	protected final class Impl extends Registry implements Serializable {
		private static final String _PROPERTY_CHAR_ENCODING = "ASCII";
		private static final String _ID_STR = "ST@"; 
		private static final String _ID_STA = "SA@"; 
		private static final String _ID_OBJ = "OB@"; 
		private static final String _ID_OBA = "OA@"; 
		private static final String _ID_BOO = "BO@"; 
		private static final String _ID_BYT = "BY@"; 
		private static final String _ID_BYA = "BA@"; 
		private static final String _ID_CHR = "CH@"; 
		private static final String _ID_CHA = "CA@"; 
		private static final String _ID_SHO = "SH@"; 
		private static final String _ID_INT = "IN@"; 
		private static final String _ID_INA = "IA@"; 
		private static final String _ID_LON = "LO@"; 
		private static final String _ID_DBL = "DO@"; 
		private static final String _ID_FLT = "FL@"; 
		private boolean _ALTERED = false;

		private Hashtable _GROUPS = new Hashtable();
		private File _DATA_FILE = null;

		protected Impl() {
			super();
		}

		protected Impl(Reader reader) throws IOException {
			super();
			this.read(reader);
		}

		protected Impl(File data_file) throws IOException {
			super();
			this.setFile(data_file);
			this.loadData();
		}

		public void setFile(File file) {
			if (_DATA_FILE != null) {
				
				
				
				_ALTERED = true;
			}
			_DATA_FILE = file;
		}

		public File getFile() {
			return _DATA_FILE;
		}

		
		public boolean isAltered() {
			return _ALTERED;
		}

		
		public void dump() {
			System.out.println(
				"Registry dump: " + (new java.util.Date()).toString());
			Enumeration ge = _GROUPS.keys();
			while (ge.hasMoreElements()) {
				String key = (String) ge.nextElement();
				System.out.println(key);
				Properties temp = (Properties) _GROUPS.get(key);
				Enumeration pe = temp.keys();
				while (pe.hasMoreElements()) {
					String pkey = (String) pe.nextElement();
					System.out.println(
						"\t" + pkey + "=" + temp.getProperty(pkey));
				}
			}
		}

		public void read(Reader reader) throws IOException {
			BufferedReader br = new BufferedReader(reader);
			String current_group = null;
			StringBuffer buffer = new StringBuffer();
			

			if (!_GROUPS.isEmpty()) {
				deleteAll();
			}

			try {
				String line = null;
				while ((line = br.readLine()) != null) {
					if ((!line.startsWith("//"))
						&& (!line.startsWith(";"))
						&& (!line.startsWith("#"))) {
						if ((line.charAt(0) == '[')
							&& (line.charAt(line.length() - 1) == ']')) {
							if ((buffer.length() > 0)
								&& (current_group != null)) {
								
								ByteArrayInputStream bais =
									new ByteArrayInputStream(
										buffer.toString().getBytes(
											_PROPERTY_CHAR_ENCODING));
								(
									(Properties) _GROUPS.get(
										current_group)).load(
									bais);

								bais.close();
								buffer.setLength(0);
							}
							current_group =
								line.substring(1, line.length() - 1);
							this.ensureGroup(current_group);
							
						}
						else if (line.indexOf('=') != -1) {
							buffer.append(line + "\n");
						}
					}
				}

				
				if ((buffer.length() > 0) && (current_group != null)) {
					
					ByteArrayInputStream bais =
						new ByteArrayInputStream(
							buffer.toString().getBytes(
								_PROPERTY_CHAR_ENCODING));
					((Properties) _GROUPS.get(current_group)).load(bais);

					bais.close();
					buffer.setLength(0);
				}

			}
			finally {
				try {
					br.close();
				}
				catch (IOException ioe0) {
				}

			}
		}

		public void write(Writer writer) throws IOException {
			
			try {
				Enumeration groups = _GROUPS.keys();
				while (groups.hasMoreElements()) {
					String group = (String) groups.nextElement();
					String writeSec =
						"["
							+ group
							+ "]"
							+ System.getProperty("line.separator");
					
					writer.write(writeSec);
					Properties temp = (Properties) _GROUPS.get(group);

					
					

					ByteArrayOutputStream baos = new ByteArrayOutputStream();
					temp.store(baos, _DATA_FILE.getName());
					writer.write(baos.toString(_PROPERTY_CHAR_ENCODING));
					baos.close();
				}
			}
			finally {
				try {
					writer.flush();
				}
				catch (IOException ioe0) {
				}

				try {
					writer.close();
				}
				catch (IOException ioe1) {
				}

			}
		}

		private void loadData() throws IOException {
			if (_DATA_FILE != null) {
				_DATA_FILE.createNewFile();
				this.read(new FileReader(_DATA_FILE));
				_ALTERED = false;
			}
			else {
				throw new IOException("Data file not set.");
			}
		}

		private void storeData() throws IOException {
			if (_DATA_FILE != null) {
				_DATA_FILE.createNewFile();
				this.write(new FileWriter(_DATA_FILE));
				_ALTERED = false;
			}
			else {
				throw new IOException("Data file not set.");
			}
		}

		private void ensureGroup(String group) {
			if (!_GROUPS.containsKey(group)) {
				_GROUPS.put(group, new Properties());
				_ALTERED = true;
			}
		}

		private void setBasicProperty(
			String group,
			String key,
			String value) {
			if (value == null) {
				throw new IllegalArgumentException("Can not set a property to null.");
			}
			else {
				this.ensureGroup(group);
				((Properties) _GROUPS.get(group)).setProperty(key, value);
				_ALTERED = true;
			}
		}

		private String getBasicProperty(
			String group,
			String key,
			String value) {
			if (value == null) {
				if (this.isGroup(group)) {
					return ((Properties) _GROUPS.get(group)).getProperty(key);
				}
				else {
					return null;
				}
			}
			else {
				this.ensureGroup(group);
				if (!((Properties) _GROUPS.get(group)).containsKey(key)) {
					this.setProperty(group, key, value);
					return ((Properties) _GROUPS.get(group)).getProperty(key);
				}
				else {
					return ((Properties) _GROUPS.get(group)).getProperty(key);
				}
			}
		}

		
		public boolean isArrayType(String group, String key) {
			int type = this.getType(group, key);
			switch (type) {
				case Registry.TYPE_STRING_ARRAY :
				case Registry.TYPE_OBJECT_ARRAY :
				case Registry.TYPE_BYTE_ARRAY :
				case Registry.TYPE_CHAR_ARRAY :
				case Registry.TYPE_INT_ARRAY :
					return true;
				default :
					return false;
			}
		}

		
		public int getType(String group, String key) {
			String value = ((Properties) _GROUPS.get(group)).getProperty(key);
			if (value == null) {
				return Registry.TYPE_NULL;
			}
			else {
				String code = value.substring(0, 3);

				
				System.out.println("TYPE: " + code);

				if (code.equals(Impl._ID_STR)) {
					return Registry.TYPE_STRING_SINGLE;
				}
				else if (code.equals(Impl._ID_STA)) {
					return Registry.TYPE_STRING_ARRAY;
				}
				else if (code.equals(Impl._ID_OBJ)) {
					return Registry.TYPE_OBJECT_SINGLE;
				}
				else if (code.equals(Impl._ID_OBA)) {
					return Registry.TYPE_OBJECT_ARRAY;
				}
				else if (code.equals(Impl._ID_BOO)) {
					return Registry.TYPE_BOOLEAN_SINGLE;
				}
				else if (code.equals(Impl._ID_BYT)) {
					return Registry.TYPE_BYTE_SINGLE;
				}
				else if (code.equals(Impl._ID_BYA)) {
					return Registry.TYPE_BYTE_ARRAY;
				}
				else if (code.equals(Impl._ID_CHR)) {
					return Registry.TYPE_CHAR_SINGLE;
				}
				else if (code.equals(Impl._ID_CHA)) {
					return Registry.TYPE_CHAR_ARRAY;
				}
				else if (code.equals(Impl._ID_SHO)) {
					return Registry.TYPE_SHORT_SINGLE;
				}
				else if (code.equals(Impl._ID_INT)) {
					return Registry.TYPE_INT_SINGLE;
				}
				else if (code.equals(Impl._ID_INA)) {
					return Registry.TYPE_INT_ARRAY;
				}
				else if (code.equals(Impl._ID_LON)) {
					return Registry.TYPE_LONG_SINGLE;
				}
				else if (code.equals(Impl._ID_DBL)) {
					return Registry.TYPE_DOUBLE_SINGLE;
				}
				else if (code.equals(Impl._ID_FLT)) {
					return Registry.TYPE_FLOAT_SINGLE;
				}
				else {
					return Registry.TYPE_CORRUPT;
				}
			}
		}

		private String encode(Object o)
			throws InvalidClassException, NotSerializableException, IOException {
			ByteArrayOutputStream baos = new ByteArrayOutputStream();
			ObjectOutputStream oos = new ObjectOutputStream(baos);
			oos.writeObject(o);
			oos.close();
			
			
			
			
			byte[] output = baos.toByteArray();
			StringBuffer buffer = new StringBuffer();
			for (int i = 0; i < output.length; i++) {
				buffer.append((int) output[i] + "|");
			}
			baos.close();
			return buffer.toString();

		}

		private Object decode(String in)
			throws OptionalDataException, ClassNotFoundException, IOException {
			
			
			
			
			String byteStr = this.trimCode(in);
			StringTokenizer stok = new StringTokenizer(byteStr, "|");
			ArrayList list = new ArrayList();
			while (stok.hasMoreTokens()) {
				list.add((String) stok.nextToken());
			}
			byte[] byteList = new byte[list.size()];
			for (int l = 0; l < list.size(); l++) {
				byteList[l] = Byte.parseByte((String) list.get(l));
			}

			
			ByteArrayInputStream bais = new ByteArrayInputStream(byteList);
			ObjectInputStream ois = new ObjectInputStream(bais);
			Object o = ois.readObject();
			ois.close();
			bais.close();
			return o;
		}

		private String trimCode(String in) {
			return in.substring(3, in.length());
		}

		
		
		

		public String getString(
			String group,
			String key,
			String defaultValue) {
			return this.trimCode(
				this.getBasicProperty(group, key, defaultValue));
		}

		public String[] getStringArray(
			String group,
			String key,
			String[] defaultValue) {
			try {
				String out = this.getBasicProperty(group, key, null);
				if (out == null) {
					this.setProperty(group, key, defaultValue);
					String so = this.getBasicProperty(group, key, null);
					if (so.startsWith(_ID_STA)) {
						return (String[]) this.decode(so);
					}
					else {
						return defaultValue;
					}
				}
				else {
					if (out.startsWith(_ID_STA)) {
						return (String[]) this.decode(out);
					}
					else {
						return defaultValue;
					}
				}
			}
			catch (Throwable t) {
				t.printStackTrace(System.out);
				return defaultValue;
			}
		}

		public boolean getBoolean(
			String group,
			String key,
			boolean defaultValue) {
			String out = this.getBasicProperty(group, key, null);
			if (out == null) {
				this.setProperty(group, key, defaultValue);
				String so = this.getBasicProperty(group, key, null);
				if (so.startsWith(_ID_BOO)) {
					return (new Boolean(this.trimCode(so))).booleanValue();
				}
				else {
					return defaultValue;
				}
			}
			else {
				if (out.startsWith(_ID_BOO)) {
					return (new Boolean(this.trimCode(out))).booleanValue();
				}
				else {
					return defaultValue;
				}
			}
		}
		public int getInteger(String group, String key, int defaultValue) {
			String out = this.getBasicProperty(group, key, null);
			if (out == null) {
				this.setProperty(group, key, defaultValue);
				String so = this.getBasicProperty(group, key, null);
				if (so.startsWith(_ID_INT)) {
					return Integer.parseInt(this.trimCode(so));
				}
				else {
					return defaultValue;
				}
			}
			else {
				if (out.startsWith(_ID_INT)) {
					return Integer.parseInt(this.trimCode(out));
				}
				else {
					return defaultValue;
				}
			}
		}
		public int[] getIntegerArray(
			String group,
			String key,
			int[] defaultValue) {
			try {
				String out = this.getBasicProperty(group, key, null);
				if (out == null) {
					this.setProperty(group, key, defaultValue);
					String so = this.getBasicProperty(group, key, null);
					if (so.startsWith(_ID_INA)) {
						return (int[]) this.decode(so);
					}
					else {
						return defaultValue;
					}
				}
				else {
					if (out.startsWith(_ID_INA)) {
						return (int[]) this.decode(out);
					}
					else {
						return defaultValue;
					}
				}
			}
			catch (Throwable t) {
				t.printStackTrace(System.out);
				return defaultValue;
			}
		}
		public long getLong(String group, String key, long defaultValue) {
			String out = this.getBasicProperty(group, key, null);
			if (out == null) {
				this.setProperty(group, key, defaultValue);
				String so = this.getBasicProperty(group, key, null);
				if (so.startsWith(_ID_LON)) {
					return Long.parseLong(this.trimCode(so));
				}
				else {
					return defaultValue;
				}
			}
			else {
				if (out.startsWith(_ID_LON)) {
					return Long.parseLong(this.trimCode(out));
				}
				else {
					return defaultValue;
				}
			}
		}
		public byte getByte(String group, String key, byte defaultValue) {
			String out = this.getBasicProperty(group, key, null);
			if (out == null) {
				this.setProperty(group, key, defaultValue);
				String so = this.getBasicProperty(group, key, null);
				if (so.startsWith(_ID_BYT)) {
					return Byte.parseByte(this.trimCode(so));
				}
				else {
					return defaultValue;
				}
			}
			else {
				if (out.startsWith(_ID_BYT)) {
					return Byte.parseByte(this.trimCode(out));
				}
				else {
					return defaultValue;
				}
			}
		}
		public byte[] getByteArray(
			String group,
			String key,
			byte[] defaultValue) {
			try {
				String out = this.getBasicProperty(group, key, null);
				if (out == null) {
					this.setProperty(group, key, defaultValue);
					String so = this.getBasicProperty(group, key, null);
					if (so.startsWith(_ID_BYA)) {
						return (byte[]) this.decode(so);
					}
					else {
						return defaultValue;
					}
				}
				else {
					if (out.startsWith(_ID_BYA)) {
						return (byte[]) this.decode(out);
					}
					else {
						return defaultValue;
					}
				}
			}
			catch (Throwable t) {
				t.printStackTrace(System.out);
				return defaultValue;
			}
		}
		public char getChar(String group, String key, char defaultValue) {
			String out = this.getBasicProperty(group, key, null);
			if (out == null) {
				this.setProperty(group, key, defaultValue);
				String so = this.getBasicProperty(group, key, null);
				if (so.startsWith(_ID_CHR)) {
					return this.trimCode(so).charAt(0);
				}
				else {
					return defaultValue;
				}
			}
			else {
				if (out.startsWith(_ID_CHR)) {
					return this.trimCode(out).charAt(0);
				}
				else {
					return defaultValue;
				}
			}
		}
		public char[] getCharArray(
			String group,
			String key,
			char[] defaultValue) {
			try {
				String out = this.getBasicProperty(group, key, null);
				if (out == null) {
					this.setProperty(group, key, defaultValue);
					String so = this.getBasicProperty(group, key, null);
					if (so.startsWith(_ID_CHA)) {
						return (char[]) this.decode(so);
					}
					else {
						return defaultValue;
					}
				}
				else {
					if (out.startsWith(_ID_CHA)) {
						return (char[]) this.decode(out);
					}
					else {
						return defaultValue;
					}
				}
			}
			catch (Throwable t) {
				t.printStackTrace(System.out);
				return defaultValue;
			}
		}
		public double getDouble(
			String group,
			String key,
			double defaultValue) {
			String out = this.getBasicProperty(group, key, null);
			if (out == null) {
				this.setProperty(group, key, defaultValue);
				String so = this.getBasicProperty(group, key, null);
				if (so.startsWith(_ID_DBL)) {
					return Double.parseDouble(this.trimCode(so));
				}
				else {
					return defaultValue;
				}
			}
			else {
				if (out.startsWith(_ID_DBL)) {
					return Double.parseDouble(this.trimCode(out));
				}
				else {
					return defaultValue;
				}
			}
		}
		public float getFloat(String group, String key, float defaultValue) {
			String out = this.getBasicProperty(group, key, null);
			if (out == null) {
				this.setProperty(group, key, defaultValue);
				String so = this.getBasicProperty(group, key, null);
				if (so.startsWith(_ID_FLT)) {
					return Float.parseFloat(this.trimCode(so));
				}
				else {
					return defaultValue;
				}
			}
			else {
				if (out.startsWith(_ID_FLT)) {
					return Float.parseFloat(this.trimCode(out));
				}
				else {
					return defaultValue;
				}
			}
		}

		public Object getObject(
			String group,
			String key,
			Serializable defaultValue) {
			try {
				String out = this.getBasicProperty(group, key, null);
				if (out == null) {
					this.setProperty(group, key, defaultValue);
					String so = this.getBasicProperty(group, key, null);
					if (so.startsWith(_ID_OBJ)) {
						return this.decode(so);
					}
					else {
						return defaultValue;
					}
				}
				else {
					if (out.startsWith(_ID_OBJ)) {
						return this.decode(out);
					}
					else {
						return defaultValue;
					}
				}
			}
			catch (Throwable t) {
				return defaultValue;
			}
		}

		public Object[] getObject(
			String group,
			String key,
			Serializable[] defaultValue) {
			try {
				String out = this.getBasicProperty(group, key, null);
				if (out == null) {
					this.setProperty(group, key, defaultValue);
					String so = this.getBasicProperty(group, key, null);
					if (so.startsWith(_ID_OBA)) {
						return (Object[]) this.decode(so);
					}
					else {
						return defaultValue;
					}
				}
				else {
					if (out.startsWith(_ID_OBA)) {
						return (Object[]) this.decode(out);
					}
					else {
						return defaultValue;
					}
				}
			}
			catch (Throwable t) {
				return defaultValue;
			}
		}

		public short getShort(String group, String key, short defaultValue) {
			String out = this.getBasicProperty(group, key, null);
			if (out == null) {
				this.setProperty(group, key, defaultValue);
				String so = this.getBasicProperty(group, key, null);
				if (so.startsWith(_ID_SHO)) {
					return Short.parseShort(this.trimCode(so));
				}
				else {
					return defaultValue;
				}
			}
			else {
				if (out.startsWith(_ID_SHO)) {
					return Short.parseShort(this.trimCode(out));
				}
				else {
					return defaultValue;
				}
			}
		}

		
		
		

		public void setProperty(String group, String key, String value) {
			this.setBasicProperty(group, key, _ID_STR + value);
		}
		public void setProperty(String group, String key, String[] value) {
			try {
				this.setBasicProperty(
					group,
					key,
					_ID_STA + this.encode(value));
			}
			catch (Throwable t) {
				
				t.printStackTrace(System.out);
			}
		}
		public void setProperty(String group, String key, boolean value) {
			this.setBasicProperty(group, key, _ID_BOO + value);
		}
		public void setProperty(String group, String key, int value) {
			this.setBasicProperty(group, key, _ID_INT + value);
		}
		public void setProperty(String group, String key, int[] value) {
			try {
				this.setBasicProperty(
					group,
					key,
					_ID_INA + this.encode(value));
			}
			catch (Throwable t) {
				
				t.printStackTrace(System.out);
			}
		}
		public void setProperty(String group, String key, long value) {
			this.setBasicProperty(group, key, _ID_LON + value);
		}
		public void setProperty(String group, String key, byte value) {
			this.setBasicProperty(group, key, _ID_BYT + value);
		}
		public void setProperty(String group, String key, byte[] value) {
			try {
				this.setBasicProperty(
					group,
					key,
					_ID_BYA + this.encode(value));
			}
			catch (Throwable t) {
				
				t.printStackTrace(System.out);
			}
		}
		public void setProperty(String group, String key, char value) {
			this.setBasicProperty(group, key, _ID_CHR + value);
		}
		public void setProperty(String group, String key, char[] value) {
			try {
				this.setBasicProperty(
					group,
					key,
					_ID_CHA + this.encode(value));
			}
			catch (Throwable t) {
				
				t.printStackTrace(System.out);
			}
		}
		public void setProperty(String group, String key, double value) {
			this.setBasicProperty(group, key, _ID_DBL + value);
		}
		public void setProperty(String group, String key, float value) {
			this.setBasicProperty(group, key, _ID_FLT + value);
		}

		public void setProperty(
			String group,
			String key,
			Serializable value) {
			try {
				this.setBasicProperty(
					group,
					key,
					_ID_OBJ + this.encode(value));
			}
			catch (Throwable t) {
				
			}
		}

		public void setProperty(
			String group,
			String key,
			Serializable[] value) {
			try {
				this.setBasicProperty(
					group,
					key,
					_ID_OBA + this.encode(value));
			}
			catch (Throwable t) {
				
			}
		}

		public void setProperty(String group, String key, short value) {
			this.setBasicProperty(group, key, _ID_SHO + value);
		}

		
		
		

		public boolean isProperty(String group, String key) {
			if (this.isGroup(group)) {
				return ((Properties) _GROUPS.get(group)).containsKey(key);
			}
			else {
				return false;
			}
		}

		public boolean isGroup(String group) {
			return _GROUPS.containsKey(group);
		}

		public Enumeration getGroups() {
			return _GROUPS.keys();
		}

		public Enumeration getKeys(String group) {
			
			this.ensureGroup(group);
			
			return ((Properties) _GROUPS.get(group)).keys();
			
		}

		public int sizeOf(String group) {
			if (this.isGroup(group)) {
				return ((Properties) _GROUPS.get(group)).size();
			}
			return 0;
		}

		public int size() {
			return _GROUPS.size();
		}

		public void deleteGroup(String group) {
			_GROUPS.remove(group);
			_ALTERED = true;
		}

		public void deleteProperty(String group, String key) {
			if (this.isGroup(group)) {
				((Properties) _GROUPS.get(group)).remove(key);
				_ALTERED = true;
			}
		}
		public void deleteAll() {
			_GROUPS.clear();
			_ALTERED = true;
		}

		public Properties referenceGroup(String group) {
			if (this.isGroup(group)) {
				return (Properties) _GROUPS.get(group);
			}
			else {
				return null;
			}
		}

		public Properties exportGroup(String group) {
			if (this.isGroup(group)) {
				return (Properties) ((Properties) _GROUPS.get(group)).clone();
			}
			else {
				return null;
			}
		}
		public void importGroup(String group, Properties properties) {
			if (!this.isGroup(group)) {
				Properties p = (Properties) properties.clone();
				_GROUPS.put(group, p);
				_ALTERED = true;
			}
		}
		public void replaceGroup(String group, Properties properties) {
			_GROUPS.put(group, properties);
			_ALTERED = true;
		}
		public void mergRegistry(Registry registry) {
			if (registry instanceof Map) {
				_GROUPS.putAll((Map) registry);
				_ALTERED = true;
			}
		}

		
		public void commit() throws IOException {
			this.storeData();
		}

		
		public void revert() throws IOException {
			if (_DATA_FILE != null && this.isAltered()) {
				
				_DATA_FILE.createNewFile();
				this.loadData();
			}
		}
	}

	protected Registry() {
		super();
	}
	
	public static final Registry blankRegistery() {
		return Registry.instance().new Impl();
	}
	
	public void commit() throws IOException {
		return;
	}
	
	public void deleteAll() {
		return;
	}
	
	public void deleteGroup(String group) {
		return;
	}
	
	public void deleteProperty(String group, String key) {
		return;
	}
	
	public void dump() {
	}
	
	public static final String encryptMD5(String decrypted) {
		try {
			java.security.MessageDigest md5 =
				java.security.MessageDigest.getInstance("MD5");
			md5.update(decrypted.getBytes());
			byte[] hash = md5.digest();
			md5.reset();
			return hashToHex(hash);
		}
		catch (java.security.NoSuchAlgorithmException nsae0) {
			return null;
		}
	}
	
	public final static String ensureDirectory(String directory) {
		java.io.File dir = new java.io.File(directory);
		if (!dir.exists() || (dir.exists() && !dir.isDirectory())) {
			dir.mkdirs();
		}
		return dir.getAbsolutePath();
	}
	
	public Properties exportGroup(String group) {
		return null;
	}
	
	public boolean getBoolean(
		String group,
		String key,
		boolean defaultValue) {
		return false;
	}
	
	public byte getByte(String group, String key, byte defaultValue) {
		return 0;
	}
	
	public byte[] getByteArray(
		String group,
		String key,
		byte[] defaultValue) {
		return null;
	}
	
	public char getChar(String group, String key, char defaultValue) {
		return (char) 0;
	}
	
	public char[] getCharArray(
		String group,
		String key,
		char[] defaultValue) {
		return null;
	}
	
	public double getDouble(String group, String key, double defaultValue) {
		return 0.0;
	}
	
	public File getFile() {
		return null;
	}
	
	public float getFloat(String group, String key, float defaultValue) {
		return 0.0F;
	}
	
	public Enumeration getGroups() {
		return null;
	}
	
	public int getInteger(String group, String key, int defaultValue) {
		return 0;
	}
	
	public int[] getIntegerArray(
		String group,
		String key,
		int[] defaultValue) {
		return null;
	}
	
	public Enumeration getKeys(String group) {
		return null;
	}
	
	public long getLong(String group, String key, long defaultValue) {
		return 0L;
	}
	
	public Object[] getObject(
		String group,
		String key,
		Object[] defaultValue) {
		return null;
	}
	
	public Object getObject(String group, String key, Object defaultValue) {
		return null;
	}
	
	public short getShort(String group, String key, short defaultValue) {
		return 0;
	}
	
	public String getString(String group, String key, String defaultValue) {
		return null;
	}
	
	public String[] getStringArray(
		String group,
		String key,
		String[] defaultValue) {
		return null;
	}
	
	public int getType(String group, String key) {
		return Registry.TYPE_CORRUPT;
	}
	
	private static final String hashToHex(byte hash[]) {
		StringBuffer buf = new StringBuffer(hash.length * 2);
		for (int i = 0; i < hash.length; i++) {
			if (((int) hash[i] & 0xff) < 0x10)
				buf.append("0");
			buf.append(Integer.toHexString((int) hash[i] & 0xff));
		}
		return buf.toString();
	}
	
	public void importGroup(String group, Properties properties) {
	}
	private static Registry instance() {
		
		if (_INSTANCE == null) {
			_INSTANCE = new Registry();
		}
		return _INSTANCE;
	}
	
	public boolean isAltered() {
		return false;
	}
	
	public boolean isArrayType(String group, String key) {
		return false;
	}
	
	public boolean isGroup(String group) {
		return false;
	}
	
	public boolean isProperty(String group, String key) {
		return false;
	}
	
	public static final boolean isRegistry(Class testClass) {
		return Registry.isRegistry(testClass.getName(), false);
	}
	
	public static final boolean isRegistry(String name) {
		return Registry.isRegistry(name, false);
	}
	
	public static final boolean isRegistry(String name, boolean encrypted) {
		if (encrypted) {
			name = encryptMD5(name).toUpperCase();
		}
		return (new File(REGISTRY_DIRECTORY, name)).exists();
	}
	
	public static final Registry loadForClass(Class requestingClass)
		throws IOException {
		return Registry.loadForName(requestingClass.getName(), false);
	}
	
	public static final Registry loadForName(String name) throws IOException {
		
		return Registry.loadForName(name, false);
	}
	
	public static final Registry loadForName(String name, boolean encrypted)
		throws IOException {
		
		
		if (encrypted) {
			name = encryptMD5(name).toUpperCase();
		}
		File file = new File(REGISTRY_DIRECTORY, name);
		return Registry.instance().new Impl(file);
	}
	
	public static final Registry loadForReader(Reader reader)
		throws IOException {
		return Registry.instance().new Impl(reader);
	}
	
	public void mergRegistry(Registry registry) {
	}
	
	public void read(Reader reader) throws IOException {
	}
	
	public Properties referenceGroup(String group) {
		return null;
	}
	
	public void replaceGroup(String group, Properties properties) {
	}
	
	public void revert() throws IOException {
		return;
	}
	
	public void setFile(File file) {
	}
	
	public void setProperty(String group, String key, byte[] value) {
		return;
	}
	
	public void setProperty(String group, String key, char[] value) {
		return;
	}
	
	public void setProperty(String group, String key, int[] value) {
		return;
	}
	
	public void setProperty(String group, String key, Object[] value) {
		return;
	}
	
	public void setProperty(String group, String key, String[] value) {
		return;
	}
	
	public void setProperty(String group, String key, byte value) {
		return;
	}
	
	public void setProperty(String group, String key, char value) {
		return;
	}
	
	public void setProperty(String group, String key, double value) {
		return;
	}
	
	public void setProperty(String group, String key, float value) {
		return;
	}
	
	public void setProperty(String group, String key, int value) {
		return;
	}
	
	public void setProperty(String group, String key, long value) {
		return;
	}
	
	public void setProperty(String group, String key, Object value) {
		return;
	}
	
	public void setProperty(String group, String key, String value) {
		return;
	}
	
	public void setProperty(String group, String key, short value) {
		return;
	}
	
	public void setProperty(String group, String key, boolean value) {
		return;
	}
	
	public int size() {
		return 0;
	}
	
	public int sizeOf(String group) {
		return 0;
	}
	
	public void write(Writer writer) throws IOException {
	}
}
